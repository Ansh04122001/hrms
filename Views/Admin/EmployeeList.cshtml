<main id="main" class="main">

    <div class="pagetitle">
        <h1>Employee List</h1>
        <nav>
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a asp-controller="Admin" asp-action="Display">Home</a></li>
                <li class="breadcrumb-item">Employee</li>
                <li class="breadcrumb-item active"><a asp-controller="Admin" asp-action="Employeelist">Manage Employee </a> </li>
            </ol>
        </nav>
    </div><!-- End Page Title -->

    <section class="section">
        <div class="row">
            <div class="col-lg-12">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Employee List</h5>
                        <div class="table-responsive">
                            <table id="EmployeeTable" class="display">
                                <thead>
                                    <tr>
                                        <th>Employee Code</th>
                                        <th>Department Name</th>
                                        <th>Manager Name</th>
                                        <th>First Name</th>
                                        <th>Designation</th>
                                        
                                        <th>Contact</th>
                                        <th>Employee Status</th>
                                        <th>Button</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                   
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

</main><!-- End #main -->
<a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>
<!-- View Modal -->
<div class="modal" tabindex="-1" role="dialog" id="viewDetailsModal">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">View Employee Details</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="getDepartmentDetails()">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-body">
                            <div class="modal-body">
                                <from class="row">
                                <div class="col-md-3">
                                    <label class="form-label" for="EmployeeCode">Employee Code<span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" name="EmployeeCode" id="EmployeeCode" readonly />
                                    
                                </div>
                                <div class="col-md-3">
                                        <label class="form-label" for="DepartmentName">Department Name<span class="text-danger">*</span></label>
                                        <input type="text" class="form-control" name="DepartmentName" id="DepartmentName" readonly />
                                   
                                </div>
                                <div class="col-md-3">
                                        <label class="form-label" for="ManagerName">Manager Name<span class="text-danger">*</span></label>
                                        <input class="form-control" name="ManagerName" id="ManagerName" readonly />
                                   
                                </div>

                                <div class="col-md-3">
                                    <label class="form-label">First Name<span class="text-danger">*</span></label>
                                        <input class="form-control" name="FirstName" readonly />
                                   
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Last Name<span class="text-danger">*</span></label>
                                        <input class="form-control" name="LastName" readonly />
                                   
                                </div>
                                    <div class="col-md-3">
                                        <label class="form-label">Gender<span class="text-danger">*</span></label>
                                        <div class="d-flex ">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="Gender" id="male" value="Male">
                                                <label class="form-check-label" for="male">Male</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="Gender" id="female" value="Female">
                                                <label class="form-check-label" for="female">Female</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="Gender" id="other" value="Other">
                                                <label class="form-check-label" for="other">Other</label>
                                            </div>
                                        </div>
                                    </div>


                                <div class="col-md-3">
                                        <label class="form-label" for="DateOfBirth">Date of Birth<span class="text-danger">*</span></label>
                                        <input class="form-control" name="DateOfBirth" id="DateOfBirth" readonly />
                                   
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Designation<span class="text-danger">*</span></label>
                                        <input class="form-control" name="Designation" readonly />
                                </div>



                                <div class="col-md-3">
                                        <label class="form-label" for="DateOfJoining">Date Of Joining<span class="text-danger">*</span></label>
                                        <input class="form-control" name="DateOfJoining" id="DateOfJoining" readonly />
                                   
                                </div>
                                <div class="col-md-3">
                                        <label class="form-label" for="ExperienceLevel">Experience Level<span class="text-danger">*</span></label>
                                        <input class="form-control" name="ExperienceLevel" id="ExperienceLevel" readonly />
                                </div>
                                <div class="col-md-3">
                                        <label class="form-label" for="Experience">Experience</label>
                                        <input type="text" class="form-control" name="Experience" id="Experience" readonly />
                                </div>

                                <div class="col-md-3">
                                    <label class="form-label">Father Name<span class="text-danger">*</span></label>
                                        <input class="form-control" name="FatherName" readonly />
                                   
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Marital Status<span class="text-danger">*</span></label><br>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="MaritalStatus" id="married" value="Married" onclick="showAnniversary()">
                                        <label class="form-check-label" for="married">Married</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="MaritalStatus" id="unmarried" value="Unmarried" onclick="hideAnniversary()">
                                        <label class="form-check-label" for="unmarried">Unmarried</label>
                                    </div>

                                </div>
                                <div class="col-md-3" id="anniversaryDiv" style="display:none;">
                                        <label class="form-label" for="AnniversaryDate">Date of Anniversary</label>
                                    <input  class="form-control" name="AnniversaryDate" id="AnniversaryDate" readonly>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label"> Contact Number<span class="text-danger">*</span></label>
                                        <input class="form-control" name="EmployeeContact" readonly />
                                   
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Alternate Number<span class="text-danger">*</span></label>
                                        <input class="form-control" name="AlternateNumber" readonly />
                                   
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Email (Official)<span class="text-danger">*</span></label>
                                        <input class="form-control" name="EmailOfficial" readonly/>
                                   
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Email (Personal)<span class="text-danger">*</span></label>
                                        <input class="form-control" name="EmailPersonal" readonly />
                                   
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Aadhar Card Number<span class="text-danger">*</span></label>
                                        <input class="form-control" name="AadharCardNumber" readonly />
                                   
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">PAN Card Number<span class="text-danger">*</span></label>
                                        <input class="form-control" name="PANCardNumber" readonly />
                                   
                                </div>

                                <div class="col-md-3">
                                    <label class="form-label">Present Address<span class="text-danger">*</span></label>
                                        <textarea class="form-control" id="EmployeeAddress" name="PresentAddress" placeholder="Present Address" readonly></textarea>
                                   
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Permanent Address<span class="text-danger">*</span></label>
                                        <textarea class="form-control" id="CorrespondenceAddress" name="PermanentAddress" placeholder="Permanent Address" readonly></textarea>
                                </div>

                                    <div class="col-md-3">
                                        <label class="form-label">State<span class="text-danger">*</span></label>
                                        <select class="form-control" id="stateSelect" name="StateId">
                                            <option value="">Select State</option>
                                            @foreach (var state in ViewBag.States)
                                            {
                                                <option value="@state.Id">@state.Name</option>
                                            }
                                        </select>
                                        <span class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">City<span class="text-danger">*</span></label>
                                        <select class="form-control" id="citySelect" name="CityId">
                                            <option value="">Select City</option>
                                            @foreach (var city in ViewBag.Cities)
                                            {
                                                <option value="@city.Id" data-state="@city.StateId">@city.Name</option>
                                            }
                                        </select>
                                        <span class="text-danger"></span>
                                    </div>
                                <div class="col-md-3">
                                    <label class="form-label">PAN Card<span class="text-danger">*</span></label>
                                        <div id="pancardPreview"></div>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Emp Images<span class="text-danger">*</span></label>
                                  
                                    <div id="EmpImagesPreview"></div>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Aadhaar Card<span class="text-danger">*</span></label>
                                   
                                    <div id="aadhaarcardPreview"></div>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Bank Details<span class="text-danger">*</span></label>
                                   
                                    <div id="bankdetailsPreview"></div>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Education Details<span class="text-danger">*</span></label>
                                    
                                    <div id="educationdetailsPreview"></div>
                                </div>
                                </from>
                            </div>
                           

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Edit Modal -->
<div class="modal" tabindex="-1" role="dialog" id="editModal">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Edit Employee Details</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="EmployeeDetails()">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-body">
                            <div class="modal-body">
                                <form asp-controller="Admin" asp-action="EmpUpdate" method="post" enctype="multipart/form-data" class="row">
                                    <input type="hidden" name="id" id="Emp_id" />
                                    <div class="col-md-3">
                                        <label class="form-label" for="Employee">Employee Code<span class="text-danger">*</span></label>
                                        <input type="text" class="form-control" name="EmployeeCode" id="Employee" />
                                        <span class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">Department Name<span class="text-danger">*</span></label>
                                        <select class="form-select" name="DepartmentName">
                                            <option value="">Select Department</option>
                                            @if (Model != null)
                                            {
                                                foreach (var department in Model)
                                                {
                                                    <option value="@department.Name">@department.Name</option>
                                                }
                                            }
                                        </select>
                                        <span class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label" for="Manager">Manager Name<span class="text-danger">*</span></label>
                                        <input type="text" class="form-control" id="Manager"  name="ManagerName" />
                                        <span class="text-danger"></span>
                                    </div>

                                    <div class="col-md-3">
                                        <label class="form-label">First Name<span class="text-danger">*</span></label>
                                        <input class="form-control" name="FirstName" placeholder="First Name" />
                                        <span class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">Last Name<span class="text-danger">*</span></label>
                                        <input class="form-control" name="LastName" placeholder="Last Name" />
                                        <span class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">Gender<span class="text-danger">*</span></label>
                                        <div class="d-flex">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="Gender" id="male" value="Male">
                                                <label class="form-check-label" for="male">Male</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="Gender" id="female" value="Female">
                                                <label class="form-check-label" for="female">Female</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="Gender" id="other" value="Other">
                                                <label class="form-check-label" for="other">Other</label>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-3">
                                        <label class="form-label">Date of Birth<span class="text-danger">*</span></label>
                                        <input class="form-control" type="date" name="DateOfBirth" />
                                        <span class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">Designation<span class="text-danger">*</span></label>
                                        <input class="form-control" name="Designation" placeholder="Designation" />
                                    </div>



                                    <div class="col-md-3">
                                        <label class="form-label">Date Of Joining<span class="text-danger">*</span></label>
                                        <input type="date" class="form-control" name="DateOfJoining" />
                                        <span class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">Experience Level<span class="text-danger">*</span></label>
                                        <select class="form-select" name="ExperienceLevel">
                                            <option value="">Experience Level</option>
                                            @if (ViewBag.ExperienceLevels != null)
                                            {
                                                foreach (var level in ViewBag.ExperienceLevels)
                                                {
                                                    <option value="@level.Name">@level.Name</option>
                                                }
                                            }
                                        </select>
                                    </div>

                                    <div class="col-md-3">
                                        <label class="form-label">Experience</label>
                                        <input type="text" class="form-control" name="Experience" placeholder="Experience" />
                                        <span class="text-danger"></span>
                                    </div>

                                    <div class="col-md-3">
                                        <label class="form-label">Father Name<span class="text-danger">*</span></label>
                                        <input class="form-control" name="FatherName" placeholder="Father Name" />
                                        <span class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">Marital Status<span class="text-danger">*</span></label><br>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" name="MaritalStatus" id="married" value="Married" onclick="Anniversaryshow()">
                                            <label class="form-check-label" for="married">Married</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" name="MaritalStatus" id="unmarried" value="Unmarried" onclick="Anniversaryhide()">
                                            <label class="form-check-label" for="unmarried">Unmarried</label>
                                        </div>
                                    </div>
                                    <div class="col-md-3" id="anniversary" style="display:none;">
                                        <label class="form-label">Date of Anniversary</label>
                                        <input type="date" class="form-control" name="AnniversaryDate" id="AnniversaryDate">
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label"> Contact Number<span class="text-danger">*</span></label>
                                        <input class="form-control" name="EmployeeContact" placeholder="Contact Number" />
                                        <span class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">Alternate Number<span class="text-danger">*</span></label>
                                        <input class="form-control" name="AlternateNumber" placeholder="Alternate Number" />
                                        <span class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">Email (Official)<span class="text-danger">*</span></label>
                                        <input class="form-control" name="EmailOfficial" placeholder="Email (Official)" />
                                        <span class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">Email (Personal)<span class="text-danger">*</span></label>
                                        <input class="form-control" name="EmailPersonal" placeholder="Email (Personal)" />
                                        <span class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">Aadhar Card Number<span class="text-danger">*</span></label>
                                        <input class="form-control" name="AadharCardNumber" placeholder="Aadhar Card Number" />
                                        <span class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">PAN Card Number<span class="text-danger">*</span></label>
                                        <input class="form-control" name="PANCardNumber" placeholder="PAN Card Number" />
                                        <span class="text-danger"></span>
                                    </div>

                                    <div class="col-md-3">
                                        <label class="form-label">Present Address<span class="text-danger">*</span></label>
                                        <textarea class="form-control" id="EmployeeAddress" name="PresentAddress" placeholder="Present Address"></textarea>
                                        <span class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">Permanent Address<span class="text-danger">*</span></label>
                                        <textarea class="form-control" id="CorrespondenceAddress" name="PermanentAddress" placeholder="Permanent Address"></textarea>
                                        <span class="text-danger"></span>
                                    </div>

                                    <div class="col-md-3">
                                        <label class="form-label">State<span class="text-danger">*</span></label>
                                        <select class="form-control" id="stateSelect" name="StateId">
                                            <option value="">Select State</option>
                                            @foreach (var state in ViewBag.States)
                                            {
                                                <option value="@state.Id">@state.Name</option>
                                            }
                                        </select>
                                        <span class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">City<span class="text-danger">*</span></label>
                                        <select class="form-control" id="citySelect" name="CityId">
                                            <option value="">Select City</option>
                                            @foreach (var city in ViewBag.Cities)
                                            {
                                                <option value="@city.Id" data-state="@city.StateId">@city.Name</option>
                                            }
                                        </select>
                                        <span class="text-danger"></span>
                                    </div>
                                    <div class="col-md-3">
                                        <input type="hidden" id="pancardHidden" name="PANCard" accept="image/*" />
                                        <label class="form-label">PAN Card<span class="text-danger">*</span></label>

                                        <input type="file" class="form-control" name="PANCardFile" id="pancard" accept="image/*" />
                                        <div id="pancardimages"> </div>

                                    </div>
                                    <div class="col-md-3"> 
                                        <input type="hidden" id="EmpImgHidden" name="EmpImages" accept="image/*" />
                                        <label class="form-label">Emp Images<span class="text-danger">*</span></label>
                                        <input type="file" class="form-control" name="EmpImagesFile" id="EmpImages" accept="image/*" />
                                        <div id="EmpImg"></div>
                                    </div>
                                    <div class="col-md-3">
                                        <input type="hidden" id="aadhaarcardHidden" name="AadhaarCard" accept="image/*" />
                                        <label class="form-label">Aadhaar Card<span class="text-danger">*</span></label>
                                        <input type="file" class="form-control" name="AadhaarCardFile" id="aadhaarcard" accept="image/*" />
                                        <div id="aadhaarcardImg"></div>
                                    </div>
                                    <div class="col-md-3">
                                        <input type="hidden" id="bankdetailsImgHidden" name="BankDetails" accept="image/*" />
                                        <label class="form-label">Bank Details<span class="text-danger">*</span></label>
                                        <input type="file" class="form-control" name="BankDetailsFile" id="bankdetails" accept="image/*" />
                                        <div id="bankdetailsImg"></div>
                                    </div>
                                    <div class="col-md-3">
                                        <input type="hidden" id="educationdetailsImgHidden" name="EducationDetails" accept="image/*" />
                                        <label class="form-label">Education Details<span class="text-danger">*</span></label>
                                        <input type="file" class="form-control" name="EducationDetailsFile" id="educationdetails" accept="image/*" />
                                        <div id="educationdetailsImg"></div>
                                    </div>

                                    <div class="text-right mt-4">
                                        <button type="submit" class="btn btn-sm btn-danger">Edit Details</button>
                                    </div>
                                </form>
                            </div>


                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Delete Modal -->
<div class="modal" tabindex="-1" role="dialog" id="deleteModal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Delete Employee</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    @*  <@* label asp-for="Dept.DeptId">Department Id</label>
                    <input asp-for="Dept.DeptId" type="text" class="form-control" readonly /> *@

                </div>
                <p>Are you sure you want to delete this Employee?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" id="confirmDelete">Delete</button>
            </div>
        </div>
    </div>
</div>
<div aria-live="polite" aria-atomic="true" style="position: relative; min-height: 100px;">
    <div id="toastContainer" style="position: absolute; top: 0; right: 0;"></div>
</div>

<div class="toast" id="leaveApplicationToast" role="alert" aria-live="assertive" aria-atomic="true" data-delay="2000">
    <div class="toast-header">
        <strong class="mr-auto">Notification</strong>
        <small>Just now</small>
    </div>
    <div class="toast-body">
        <!-- This message will be updated dynamically -->
    </div>
</div>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
    $(document).ready(function () {
      
        $('#EmployeeTable').DataTable({
            "ajax": {
                "url": "/Admin/GetEmpList",
                "type": "GET",
                "dataType": "json",
                "dataSrc": ""
            },
            "columns": [
                { "data": "employeeCode" },
                { "data": "departmentName" },
                { "data": "managerName" },
                { "data": "firstName" },
                { "data": "designation" },
                { "data": "employeeContact" },
                {
                    "data": "isActive",
                    "render": renderActive
                },
               
                {
                    "data": "isActive",
                    "render": renderIsActive
                },

                // {
                //     "data": "empImages",
                //     "render": function (data, type, full, meta) {
                //         return '<img src="' + data + '" alt="Profile Photo" style="max-width: 50px; max-height: 50px;" />';
                //     }
                // },
                {
                    "data": null,
                    "render": function (data, type, row) {
                        return '<div class="dropdown d-flex justify-content-center">' +
                            '<button class="btn btn-sm btn-danger dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="bi bi-three-dots-vertical"></i></button>' +
                            '<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">' +
                            '<button type="button" class="btn" data-toggle="modal" data-target="#viewDetailsModal" onclick="getEmployeeDetails(' + row.id + ')"><i class="bi bi-eye mr-2"></i>View Details</button> ' +
                            '<button type="button" class="btn" data-toggle="modal" data-target="#editModal" onclick="EmployeeDetails(' + row.id + ')"><i class="bi bi-pencil mr-2"></i>Edit</button> ' +
                            '<button type="button" class="btn" data-toggle="modal" data-target="#deleteModal" onclick="IsDelete(' + row.id + ')"><i class="bi bi-trash mr-2"></i>Delete</button>' +
                            '</div>' +
                            '</div>';
                    }
                }
            ]

        });
    });
    function getEmployeeDetails(id) {
        $.ajax({
            url: '/Admin/GetEmployeeDetails/' + id,
            type: 'GET',
            success: function (data) {
                var dateOfBirth = new Date(data.dateOfBirth);
                var formattedDate = dateOfBirth.toISOString().split('T')[0];
                var dateOfJoining = new Date(data.dateOfJoining);
                var formatted = dateOfJoining.toISOString().split('T')[0];
                $('#EmployeeCode').val(data.employeeCode);
                $('input[name="DepartmentName"]').val(data.departmentName);
                $('#ManagerName').val(data.managerName);
                $('input[name="FirstName"]').val(data.firstName);
                $('input[name="LastName"]').val(data.lastName);
                $('input[name="Gender"][value="' + data.gender + '"]').prop('checked', true);
                $('input[name="DateOfBirth"]').val(formattedDate);
                $('input[name="Designation"]').val(data.designation);
                $('input[name="DateOfJoining"]').val(formatted);
                $('input[name="ExperienceLevel"]').val(data.experienceLevel);
                $('input[name="Experience"]').val(data.experience);
                $('input[name="FatherName"]').val(data.fatherName);
                $('input[name="MaritalStatus"][value="' + data.maritalStatus + '"]').prop('checked', true);
                if (data.maritalStatus === 'Married') {
                    $('#anniversaryDiv').show();
                    $('input[name="AnniversaryDate"]').val(data.anniversaryDate);
                } else {
                    $('#anniversaryDiv').hide();
                }
                $('input[name="EmployeeContact"]').val(data.employeeContact);
                $('input[name="AlternateNumber"]').val(data.alternateNumber);
                $('input[name="EmailOfficial"]').val(data.emailOfficial);
                $('input[name="EmailPersonal"]').val(data.emailPersonal);
                $('input[name="AadharCardNumber"]').val(data.aadharCardNumber);
                $('input[name="PANCardNumber"]').val(data.panCardNumber);
                $('textarea[name="PresentAddress"]').val(data.presentAddress);
                $('textarea[name="PermanentAddress"]').val(data.permanentAddress);
                $('select[name="StateId"]').val(data.stateId);
                // Trigger change event to populate cities based on the selected state
                $('input[name="StateId"]').trigger('change');
                $('select[name="CityId"]').val(data.cityId);

                $('#pancardPreview').html('<img src="' + data.panCard + '" alt="PAN Card" style="max-width: 100px; max-height: 100px;">');
                $('#EmpImagesPreview').html('<img src="' + data.empImages + '" alt="Employee Images" style="max-width: 100px; max-height: 100px;">');
                $('#aadhaarcardPreview').html('<img src="' + data.aadhaarCard + '" alt="Aadhaar Card" style="max-width: 100px; max-height: 100px;">');
                $('#bankdetailsPreview').html('<img src="' + data.bankDetails + '" alt="Bank Details" style="max-width: 100px; max-height: 100px;">');
                $('#educationdetailsPreview').html('<img src="' + data.educationDetails + '" alt="Education Details" style="max-width: 100px; max-height: 100px;">');
            },
            error: function () {
                alert('Failed to fetch employee details.');
            }
        });
    }
    function EmployeeDetails(id) {
        $.ajax({
            url: '/Admin/GetEmployeeDetails/' + id,
            type: 'GET',
            success: function (data) {
                var dateOfBirth = new Date(data.dateOfBirth);
                var formattedDate = dateOfBirth.toISOString().split('T')[0];
                var dateOfJoining = new Date(data.dateOfJoining);
                var formatted = dateOfJoining.toISOString().split('T')[0];
                $('#Emp_id').val(data.id);
                $('#Employee').val(data.employeeCode);
                $('select[name="DepartmentName"]').val(data.departmentName);
                $('#Manager').val(data.managerName);
                $('input[name="FirstName"]').val(data.firstName);
                $('input[name="LastName"]').val(data.lastName);
                $('input[name="Gender"][value="' + data.gender + '"]').prop('checked', true);
                $('input[name="DateOfBirth"]').val(formattedDate);
                $('input[name="Designation"]').val(data.designation);
                $('input[name="DateOfJoining"]').val(formatted);
                $('select[name="ExperienceLevel"]').val(data.experienceLevel);
                $('input[name="Experience"]').val(data.experience);
                $('input[name="FatherName"]').val(data.fatherName);
                $('input[name="MaritalStatus"][value="' + data.maritalStatus + '"]').prop('checked', true);
                if (data.maritalStatus === 'Married') {
                    $('#anniversaryDiv').show();
                    $('input[name="AnniversaryDate"]').val(data.anniversaryDate);
                } else {
                    $('#anniversaryDiv').hide();
                }
                $('input[name="EmployeeContact"]').val(data.employeeContact);
                $('input[name="AlternateNumber"]').val(data.alternateNumber);
                $('input[name="EmailOfficial"]').val(data.emailOfficial);
                $('input[name="EmailPersonal"]').val(data.emailPersonal);
                $('input[name="AadharCardNumber"]').val(data.aadharCardNumber);
                $('input[name="PANCardNumber"]').val(data.panCardNumber);
                $('textarea[name="PresentAddress"]').val(data.presentAddress);
                $('textarea[name="PermanentAddress"]').val(data.permanentAddress);
                $('select[name="StateId"]').val(data.stateId);
                // Trigger change event to populate cities based on the selected state
                $('input[name="StateId"]').trigger('change');
                $('select[name="CityId"]').val(data.cityId);

                $('#pancardimages').html('<img src="' + data.panCard + '" alt="PAN Card" style="max-width: 100px; max-height: 100px;">');
                $('#EmpImg').html('<img src="' + data.empImages + '" alt="Employee Images" style="max-width: 100px; max-height: 100px;">');
                $('#aadhaarcardImg').html('<img src="' + data.aadhaarCard + '" alt="Aadhaar Card" style="max-width: 100px; max-height: 100px;">');
                $('#bankdetailsImg').html('<img src="' + data.bankDetails + '" alt="Bank Details" style="max-width: 100px; max-height: 100px;">');
                $('#educationdetailsImg').html('<img src="' + data.educationDetails + '" alt="Education Details" style="max-width: 100px; max-height: 100px;">');
                $('#pancardHidden').val(data.panCard);
                $('#EmpImgHidden').val(data.empImages);
                $('#aadhaarcardHidden').val(data.aadhaarCard);
                $('#bankdetailsImgHidden').val(data.bankDetails);
                $('#educationdetailsImgHidden').val(data.educationDetails);
              
            },
            error: function () {
                alert('Failed to fetch employee details.');
            }
        });
    }
    document.addEventListener('DOMContentLoaded', function () {
        
        var citySelect = document.getElementById('citySelect');
        var cities = citySelect.getElementsByTagName('option');
        for (var i = 0; i < cities.length; i++) {
            cities[i].style.display = 'none';
        }
        document.getElementById('stateSelect').addEventListener('change', function () {
            var stateId = this.value;
            for (var i = 0; i < cities.length; i++) {
                var city = cities[i];
                if (city.dataset.state === stateId) {
                    city.style.display = '';
                } else {
                    city.style.display = 'none';
                }
            }
        });
       
    });
    $(document).ready(function () {
        $('#pancard').on('change', function () {
            previewImage(this, 'pancardimages');
        });

        $('#EmpImages').on('change', function () {
            previewImage(this, 'EmpImg');
        });

        $('#aadhaarcard').on('change', function () {
            previewImage(this, 'aadhaarcardImg');
        });

        $('#bankdetails').on('change', function () {
            previewImage(this, 'bankdetailsImg');
        });

        $('#educationdetails').on('change', function () {
            previewImage(this, 'educationdetailsImg');
        });
    });
    function previewImage(input, previewId) {
        var file = input.files[0];
        if (file) {
            var reader = new FileReader();
            reader.onload = function (e) {
                $('#' + previewId).html('<img src="' + e.target.result + '" style="max-width:100%; max-height:100%;">').show();
            }
            reader.readAsDataURL(file);
        }
    }
    function showAnniversary() {
        document.getElementById("anniversaryDiv").style.display = "block";
    }
    function hideAnniversary() {
        document.getElementById("anniversaryDiv").style.display = "none";
    }
    function Anniversaryshow() {
        document.getElementById("anniversary").style.display = "block";
    }
    function Anniversaryhide() {
        document.getElementById("anniversary").style.display = "none";
    }
    function ToggleThumb(id, para) {
        debugger;
        $.ajax({
            url: '/Admin/Thumb/' + id + '?para=' + para,
            type: 'POST',
            success: function (data) {
                var toastMessage = para === 'Accept' ? 'Employee is Active.' : 'Employee is InActive.';
                var toast = $('#leaveApplicationToast').clone();
                toast.find('.toast-body').text(toastMessage);
                $('#toastContainer').append(toast);
                toast.toast('show');
               
                $('#EmployeeTable').DataTable().ajax.reload();
            },
            error: function () {
                // Handle error
                console.error('Failed to toggle thumb.');
            }
        });
    }
    function renderIsActive(data, type, row) {
        return '<div class="btn-group">' +
            '<button class="btn btn-success btn-sm" onclick="ToggleThumb(' + row.id + ', \'Accept\')">Active</button>' +
            '<button class="btn btn-danger btn-sm" onclick="ToggleThumb(' + row.id + ', \'Reject\')">InActive</button>' +
            '</div>';
    }

    function renderActive(data, type, row) {
        debugger;
        if (data == true) {
            return '<span style="color: green;">Active</span>';
        } else {
            return '<span style="color: red;">Inactive</span>';
        }

    }
    function IsDelete(id) {
        $('#confirmDelete').unbind().click(function () {
            $.ajax({
                url: '/Admin/IsDelete/' + id + '?action=delete',
                type: 'POST',
                success: function (data) {
                    // Reload the DataTable
                    $('#EmployeeTable').DataTable().ajax.reload();
                    $('#deleteModal').modal('hide');
                },
                error: function () {
                    console.error('Failed to delete employee.');
                    $('#deleteModal').modal('hide');
                }
            });
        });

        
    }


</script>
